[build]
  publish = "build"
  command = "bash ./scripts/build.sh"

[[headers]]
  for = "/_/_placeholder/*.png"
  [headers.values]
    Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"

[[headers]]
  for = "/*.png"
  [headers.values]
    Cache-Control = "public, max-age: 900, s-maxage=604800, must-revalidate"

[[headers]]
  for = "/domains.json"
  [headers.values]
    Cache-Control = "public, max-age: 900, s-maxage=604800, must-revalidate"

[[redirects]]
  from = "/"
  to = "https://github.com/home-assistant/brands"
  force = true
  status = 301
  headers = {Cache-Control = "public, max-age: 900, s-maxage=604800, must-revalidate"}

# If an integration icon is not found, search the growing brands folder before showing the placeholder straight away
[[redirects]]
  from = "/_/:brand/:file.png"
  to = "/brands/_/:brand/:file.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/icon.png"
  to = "/brands/_/_placeholder/icon.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/logo.png"
  to = "/brands/_/_placeholder/logo.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/icon@2x.png"
  to = "/brands/_/_placeholder/icon@2x.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/logo@2x.png"
  to = "/brands/_/_placeholder/logo@2x.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/dark_icon.png"
  to = "/brands/_/_placeholder/icon.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/dark_logo.png"
  to = "/brands/_/_placeholder/logo.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/dark_icon@2x.png"
  to = "/brands/_/_placeholder/icon@2x.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}

[[redirects]]
  from = "/brands/_/*/dark_logo@2x.png"
  to = "/brands/_/_placeholder/logo@2x.png"
  force = false
  status = 302
  headers = {Cache-Control = "public, max-age: 900, s-maxage=3600, must-revalidate"}
